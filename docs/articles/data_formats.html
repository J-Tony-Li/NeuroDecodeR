<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data formats â€¢ The Neural Decoding Toolbox in R</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data formats">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">The Neural Decoding Toolbox in R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction_tutorial.html">Introductory tutorial</a>
    </li>
    <li>
      <a href="../articles/generalization_tutorial.html">Generalization analysis tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_formats.html">Data formats</a>
    </li>
    <li>
      <a href="../articles/datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/NDTr_object_specification.html">NDTr object specification</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/emeyers/NDTr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Data formats</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/emeyers/NDTr/blob/master/vignettes/data_formats.Rmd"><code>vignettes/data_formats.Rmd</code></a></small>
      <div class="hidden name"><code>data_formats.Rmd</code></div>

    </div>

    
    
<p>The NDTr uses two closely related data formats called <code>raster format</code> and <code>binned format</code>. For almost all analysis, one starts by saving data from each site in <code>raster format</code>. One then converts it to <code>binned format</code> using the <code><a href="../reference/create_binned_data.html">create_binned_data()</a></code> which has the data from all the sites at a coarser temporal resolution. The <code>binned format</code> data is then used in all decoding analyses. More information about what is required to have data in these specified formats is described below.</p>
<div id="raster-format" class="section level2">
<h2 class="hasAnchor">
<a href="#raster-format" class="anchor"></a>Raster format</h2>
<p>Raster format data contains the data at the highest temporal resolution. For raster data, there is a separate file that contains a data frame of data each site (e.g., there is a separate file for each single neuron, each LFP channel, etc.). The reason for having data from each site in a separate file is to prevent memory one from running out of memory when trying to load data from many sites when the data is at a high temporal resolution.</p>
<p>For raster format data, the number of rows in the data frame correspond to the number of trials in the experiment. Data that is in raster format is a data frame that must contain variables (columns) that start with the following prefixes:</p>
<ol style="list-style-type: decimal">
<li><p><code>labels.XXX</code> These variables contain labels of which experimental conditions were shown on a given trial.</p></li>
<li><p><code>time.XXX</code> These variables contain the data for a given time.</p></li>
</ol>
<p>There can also be two additional optional variables in a raster format data frame which are:</p>
<ol start="3" style="list-style-type: decimal">
<li><p><code>site_info.XXX</code> These variables contain additional meta data out the site. For example, one could have a variable called <code>site_info.brain_area</code> which indicated which brain region a given site came from. All rows for a given <code>site_info.XXX</code> variables typically have the same value.</p></li>
<li><p><code>trial_number</code> This is a variable that specifies a unique for each row indicating which trial a given row of data came from. This is useful for data where all sites were recorded simultaneously in order to allow one to do the decoding on actual simultaneously recorded data (e.g., by using the <code><a href="../reference/ds_basic.html">ds_basic()</a></code> <code>create_simultaneously_recorded_populations</code> argument).</p></li>
</ol>
<div id="checking-if-data-is-in-valid-raster-format" class="section level3">
<h3 class="hasAnchor">
<a href="#checking-if-data-is-in-valid-raster-format" class="anchor"></a>Checking if data is in valid raster format</h3>
<p>To test whether data correctly conforms to the requirements of raster format, one can use the internal function <code>NDTr:::test_valid_raster_data_format()</code>.</p>
</div>
<div id="example-raster-format-data" class="section level3">
<h3 class="hasAnchor">
<a href="#example-raster-format-data" class="anchor"></a>Example raster-format data</h3>
<p>Below is an example of raster format data file from the <a href="datasets.html">Zhang-Desimone 7 object data set</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">raster_dir_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, <span class="dt">package =</span> <span class="st">"NDTr"</span>), <span class="st">"Zhang_Desimone_7object_raster_data_rda"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">full_file_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path</a></span>(raster_dir_name, <span class="st">"bp1001spk_01A_raster_data.rda"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># test the file is in valid raster format</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">NDTr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/NDTr/topics/test_valid_raster_format">test_valid_raster_format</a></span>(full_file_name)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># load the data to see the variables in it</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/load">load</a></span>(full_file_name)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(raster_data[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>])</a></code></pre></div>
<pre><code>##     site_info.session_ID site_info.recording_channel site_info.unit
## 1                   1001                           1              A
## 1.1                 1001                           1              A
## 1.2                 1001                           1              A
## 1.3                 1001                           1              A
## 1.4                 1001                           1              A
## 1.5                 1001                           1              A
##     labels.combined_ID_position labels.stimulus_position
## 1                    hand_upper                    upper
## 1.1               flower_middle                   middle
## 1.2               guitar_middle                   middle
## 1.3                  face_upper                    upper
## 1.4                 kiwi_middle                   middle
## 1.5                 couch_upper                    upper
##     labels.stimulus_ID time.-500 time.-499 time.-498 time.-497
## 1                 hand         0         0         0         0
## 1.1             flower         0         0         0         0
## 1.2             guitar         0         0         0         0
## 1.3               face         0         0         0         0
## 1.4               kiwi         0         0         0         0
## 1.5              couch         0         0         0         0</code></pre>
</div>
</div>
<div id="binned-format" class="section level2">
<h2 class="hasAnchor">
<a href="#binned-format" class="anchor"></a>Binned format</h2>
<p>Binned format data contains data from multiple sites (e.g., data from many neurons, LFP channels, etc.). Data that is in binned format is very similar to data that is in raster format except that it contains information from multiple sites and often contains the information at a coarser resolution. For example, binned data would typically contain firing rates over some time interval sampled at a lower rate, as opposed to raster format data that would typically contain individual spikes sampled at a higher rate. Binned format data is typically created from raster format data using the function <code>create_binned_data</code> which converts a directory of raster format files into a binned-format file that is used in subsequent decoding analyses.</p>
<p>Binned format data must be in a data frame where the number of rows in the data frame correspond to the number of trial in all experimental recording sessions across all sites. The binned format data frame must also contain the variables that start with the following prefixes:</p>
<ol style="list-style-type: decimal">
<li><p><code>siteID.XXX</code> A unique number indicating a site a given row of data corresponds to.</p></li>
<li><p><code>labels.XXX</code> These variables contain labels of which experimental conditions occurred on a given trial.</p></li>
<li><p><code>time.X_Y</code> These variables contain data in a time range from X to Y.</p></li>
</ol>
<p>There can also be two additional optional variables in a binned format data frame which are:</p>
<ol start="4" style="list-style-type: decimal">
<li><p><code>site_info.XXX</code> These variables contain additional meta data out the site. For example, one could have a variable called <code>site_info.brain_area</code> which indicated which brain region a given site came from. All rows for a given <code>site_info.XXX</code> variables typically have the same value.</p></li>
<li><p><code>trial_number</code> This is a variable that specifies a unique for each row indicating which trial a given row of data came from. This is useful for data where all sites were recorded simultaneously in order to allow one to do the decoding on actual simultaneously recorded data (e.g., by using the <code><a href="../reference/ds_basic.html">ds_basic()</a></code> <code>create_simultaneously_recorded_populations</code> argument).</p></li>
</ol>
<div id="checking-if-data-is-in-valid-binned-format" class="section level3">
<h3 class="hasAnchor">
<a href="#checking-if-data-is-in-valid-binned-format" class="anchor"></a>Checking if data is in valid binned format</h3>
<p>To test whether data correctly conforms to the requirements of binned format, one can use the internal function <code>NDTr:::test_valid_binned_data_format()</code>.</p>
</div>
<div id="example-binned-format-data" class="section level3">
<h3 class="hasAnchor">
<a href="#example-binned-format-data" class="anchor"></a>Example binned-format data</h3>
<p>Below is an example of binned format data file from the <a href="datasets.html">Zhang-Desimone 7 object data set</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">binned_file_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata/ZD_150bins_50sampled.Rda"</span>, <span class="dt">package=</span><span class="st">"NDTr"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co"># test the file is in valid binned format using an internal function</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">NDTr<span class="op">:::</span><span class="kw">test_valid_binned_format</span>(binned_file_name)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># load the data to see the variables in it</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/load">load</a></span>(binned_file_name)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(binned_data[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>])</a></code></pre></div>
<pre><code>##     siteID site_info.session_ID site_info.recording_channel site_info.unit
## 1        1                 1001                           1              A
## 1.1      1                 1001                           1              A
## 1.2      1                 1001                           1              A
## 1.3      1                 1001                           1              A
## 1.4      1                 1001                           1              A
## 1.5      1                 1001                           1              A
##     labels.combined_ID_position labels.stimulus_position
## 1                    hand_upper                    upper
## 1.1               flower_middle                   middle
## 1.2               guitar_middle                   middle
## 1.3                  face_upper                    upper
## 1.4                 kiwi_middle                   middle
## 1.5                 couch_upper                    upper
##     labels.stimulus_ID time.-500_-351 time.-450_-301 time.-400_-251
## 1                 hand    0.006666667    0.013333333    0.020000000
## 1.1             flower    0.000000000    0.006666667    0.006666667
## 1.2             guitar    0.000000000    0.000000000    0.000000000
## 1.3               face    0.000000000    0.000000000    0.000000000
## 1.4               kiwi    0.000000000    0.000000000    0.000000000
## 1.5              couch    0.000000000    0.006666667    0.006666667</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#raster-format">Raster format</a></li>
      <li><a href="#binned-format">Binned format</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ethan Meyers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
