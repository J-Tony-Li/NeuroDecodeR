<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NDTr object specification • The Neural Decoding Toolbox in R</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="NDTr object specification">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">The Neural Decoding Toolbox in R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction_tutorial.html">Introductory tutorial</a>
    </li>
    <li>
      <a href="../articles/generalization_tutorial.html">Generalization analysis tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_formats.html">Data formats</a>
    </li>
    <li>
      <a href="../articles/datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/NDTr_object_specification.html">NDTr object specification</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/emeyers/NDTr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>NDTr object specification</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/emeyers/NDTr/blob/master/vignettes/NDTr_object_specification.Rmd"><code>vignettes/NDTr_object_specification.Rmd</code></a></small>
      <div class="hidden name"><code>NDTr_object_specification.Rmd</code></div>

    </div>

    
    
<p><br></p>
<p>The Neural Decoding Toolbox in R (NDTr) is designed around five abstract object types which are:</p>
<ol style="list-style-type: decimal">
<li><p>Datasources (DS): Generate training and test splits of the data.</p></li>
<li><p>Feature preprofessors (FP): Learn parameters on the training set and apply transformations to the training and test sets.</p></li>
<li><p>Classifiers (CL): Learn the relationship between experimental conditions (i.e., “labels”) and neural data on a training set, and then predict experimental conditions neural data in a test set.</p></li>
<li><p>Result metrics (RM): Aggregate results across validation splits and over resampled runs and compute and plot final decoding accuracy metrics.</p></li>
<li><p>Cross-validators (CV): Take the DS, FP, CL and RM objects and run a cross-validation decoding procedure.</p></li>
</ol>
<p>By having a standard set of object types, one can easily use different instances of these five object types to do different types of analyses.</p>
<p>For most common analyses, one can use instances of these different object types that come with the NDTr. However, in some cases, one might want to extend the functionality of the NDTr to gain additional insights. For example, one might want to try a different classifier to gain a better understanding of how populations of neurons code information (e.g., see Meyers, Borzello, Freiwald and Tsao, J Neurosci 2015).</p>
<p>The following document describes the methods and data formats that need to be implemented to create valid DS, FP, CL, RM, and CV objec types. By creating new classes of objects that conform to these interfaces, one can easily extend the NDTr to try new analyses.</p>
<p><br></p>
<p><br></p>
<div id="datasources-ds" class="section level1">
<h1 class="hasAnchor">
<a href="#datasources-ds" class="anchor"></a>Datasources (DS)</h1>
<p>Datasources are used to generate training and tests splits of data.</p>
<div id="implementing-an-ds-methods-and-data-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#implementing-an-ds-methods-and-data-formats" class="anchor"></a>Implementing an DS: methods and data formats</h3>
<p>All datasources must implement a <code><a href="../reference/get_data.html">get_data()</a></code> method that returns a data frame that has the following variables in it:</p>
<ol style="list-style-type: decimal">
<li><p><code>train_labels</code>: The label levels that occur on each trial in the training data set</p></li>
<li><p><code>test_labels</code>: The label levels that occur on each trial in the test data set</p></li>
<li><p><code>time_bin</code>: The time in the experiment where the <em>test</em> data comes from</p></li>
<li><p><code>site_XXX</code>: A collection of variables that each has data from one site (e.g., neuron, EEG channel etc.)</p></li>
<li><p><code>CV_XXX</code>: A list for each CV split whether a given row is in that train or test set</p></li>
</ol>
<p>Like all NDTr objects, DS objects must also implement a <code>get_properties()</code> method which returns a data frame with one row that lists all the properties that have been set to allow for reproducible research.</p>
</div>
<div id="example-of-internals-of-ds-objects-using-the-ds_basic-object" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-internals-of-ds-objects-using-the-ds_basic-object" class="anchor"></a>Example of internals of DS objects using the ds_basic object</h3>
<p>Here is an example the data returned by the <code><a href="../reference/ds_basic.html">ds_basic()</a></code> datasource</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">data_file_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata/ZD_150bins_50sampled.Rda"</span>, <span class="dt">package=</span><span class="st">"NDTr"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">ds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ds_basic.html">ds_basic</a></span>(data_file_name, <span class="st">'stimulus_ID'</span>, <span class="dv">18</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">all_cv_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_data.html">get_data</a></span>(ds)  </a>
<a class="sourceLine" id="cb1-5" data-line-number="5"> </a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(all_cv_data)</a></code></pre></div>
<pre><code>##   [1] "train_labels" "test_labels"  "time_bin"     "site_0001"   
##   [5] "site_0002"    "site_0003"    "site_0004"    "site_0005"   
##   [9] "site_0006"    "site_0007"    "site_0008"    "site_0009"   
##  [13] "site_0010"    "site_0011"    "site_0012"    "site_0013"   
##  [17] "site_0014"    "site_0015"    "site_0016"    "site_0017"   
##  [21] "site_0018"    "site_0019"    "site_0020"    "site_0021"   
##  [25] "site_0022"    "site_0023"    "site_0024"    "site_0025"   
##  [29] "site_0026"    "site_0027"    "site_0028"    "site_0029"   
##  [33] "site_0030"    "site_0031"    "site_0032"    "site_0033"   
##  [37] "site_0034"    "site_0035"    "site_0036"    "site_0037"   
##  [41] "site_0038"    "site_0039"    "site_0040"    "site_0041"   
##  [45] "site_0042"    "site_0043"    "site_0044"    "site_0045"   
##  [49] "site_0046"    "site_0047"    "site_0048"    "site_0049"   
##  [53] "site_0050"    "site_0051"    "site_0052"    "site_0053"   
##  [57] "site_0054"    "site_0055"    "site_0056"    "site_0057"   
##  [61] "site_0058"    "site_0059"    "site_0060"    "site_0061"   
##  [65] "site_0062"    "site_0063"    "site_0064"    "site_0065"   
##  [69] "site_0066"    "site_0067"    "site_0068"    "site_0069"   
##  [73] "site_0070"    "site_0071"    "site_0072"    "site_0073"   
##  [77] "site_0074"    "site_0075"    "site_0076"    "site_0077"   
##  [81] "site_0078"    "site_0079"    "site_0080"    "site_0081"   
##  [85] "site_0082"    "site_0083"    "site_0084"    "site_0085"   
##  [89] "site_0086"    "site_0087"    "site_0088"    "site_0089"   
##  [93] "site_0090"    "site_0091"    "site_0092"    "site_0093"   
##  [97] "site_0094"    "site_0095"    "site_0096"    "site_0097"   
## [101] "site_0098"    "site_0099"    "site_0100"    "site_0101"   
## [105] "site_0102"    "site_0103"    "site_0104"    "site_0105"   
## [109] "site_0106"    "site_0107"    "site_0108"    "site_0109"   
## [113] "site_0110"    "site_0111"    "site_0112"    "site_0113"   
## [117] "site_0114"    "site_0115"    "site_0116"    "site_0117"   
## [121] "site_0118"    "site_0119"    "site_0120"    "site_0121"   
## [125] "site_0122"    "site_0123"    "site_0124"    "site_0125"   
## [129] "site_0126"    "site_0127"    "site_0128"    "site_0129"   
## [133] "site_0130"    "site_0131"    "site_0132"    "CV_1"        
## [137] "CV_2"         "CV_3"         "CV_4"         "CV_5"        
## [141] "CV_6"         "CV_7"         "CV_8"         "CV_9"        
## [145] "CV_10"        "CV_11"        "CV_12"        "CV_13"       
## [149] "CV_14"        "CV_15"        "CV_16"        "CV_17"       
## [153] "CV_18"</code></pre>
<p><br></p>
<p><br></p>
</div>
</div>
<div id="feature-preprocessors-fp" class="section level1">
<h1 class="hasAnchor">
<a href="#feature-preprocessors-fp" class="anchor"></a>Feature preprocessors (FP)</h1>
<p>Feature preprocessors learn a set of parameters from the training data and modify both the training and the test data based on these parameters, prior to the data being sent to the classifier. The features preprocessor objects must only use the training data to learn the preprocessing parameters in order to prevent contamination between the training and test data which could bias the results.</p>
<div id="implementing-an-fp-required-methods-and-data-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#implementing-an-fp-required-methods-and-data-formats" class="anchor"></a>Implementing an FP: required methods and data formats</h3>
<p>All feature preprocessors must implement <code><a href="../reference/preprocess_data.html">preprocess_data()</a></code>. This method takes two data frames called <em>training_set</em> and <em>test_set</em> have the following variables:</p>
<div id="training_set" class="section level4">
<h4 class="hasAnchor">
<a href="#training_set" class="anchor"></a>training_set</h4>
<ol style="list-style-type: decimal">
<li>
<code>training_labels</code>: The labels used to train the classifier.</li>
<li>
<code>site_X</code>: a group of varaibles that has data from multiple sites.</li>
</ol>
</div>
<div id="test_set" class="section level4">
<h4 class="hasAnchor">
<a href="#test_set" class="anchor"></a>test_set</h4>
<ol style="list-style-type: decimal">
<li>
<code>test_labels</code>: The labels used to testthe classifier</li>
<li>
<code>site_X</code>: a group of varaibles that has data from multiple sites</li>
<li>
<code>time_bin</code>: character strings listing which times different rows correspond to</li>
</ol>
<p>The <code><a href="../reference/preprocess_data.html">preprocess_data()</a></code> returns a list with the two data frames <em>training_set</em> and <em>test_set</em> but the data in these data frames has been preprocessed based on parameters learned from the training_set.</p>
<p>Like all NDTr objects, FP objects must also implement a <code>get_properties()</code> method which returns a data frame with one row that lists all the properties that have been set to allow for reproducible research.</p>
</div>
</div>
<div id="example-of-internals-of-fp-objects-using-the-fp_zscore" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-internals-of-fp-objects-using-the-fp_zscore" class="anchor"></a>Example of internals of FP objects using the fp_zscore</h3>
<p>If you want to implement a new FP object yourself, below is an example of how the FP object gets and returns data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># create a ds_basic to get the data</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">data_file_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata/ZD_150bins_50sampled.Rda"</span>, <span class="dt">package=</span><span class="st">"NDTr"</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">ds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ds_basic.html">ds_basic</a></span>(data_file_name, <span class="st">'stimulus_ID'</span>, <span class="dv">18</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">cv_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_data.html">get_data</a></span>(ds)  </a>
<a class="sourceLine" id="cb3-5" data-line-number="5"> </a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co"># an example of spliting the data into a training and test set, </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># this is done in the cross-validator</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">training_set &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(cv_data, </a>
<a class="sourceLine" id="cb3-10" data-line-number="10">                              time_bin <span class="op">==</span><span class="st"> "time.100_249"</span>, </a>
<a class="sourceLine" id="cb3-11" data-line-number="11">                              CV_<span class="dv">1</span> <span class="op">==</span><span class="st"> "train"</span>) <span class="op">%&gt;%</span><span class="st">       </span><span class="co"># get data from the first CV split</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">"site"</span>), train_labels)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">        </a>
<a class="sourceLine" id="cb3-14" data-line-number="14">test_set &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(cv_data, CV_<span class="dv">1</span> <span class="op">==</span><span class="st"> "test"</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># get data from the first CV split</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">"site"</span>), test_labels, time_bin) </a>
<a class="sourceLine" id="cb3-16" data-line-number="16"></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co"># use the fp object to normalize the data </span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20">fp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/fp_zscore.html">fp_zscore</a></span>()</a>
<a class="sourceLine" id="cb3-21" data-line-number="21">processed_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/preprocess_data.html">preprocess_data</a></span>(fp, training_set, test_set)</a>
<a class="sourceLine" id="cb3-22" data-line-number="22"></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co"># prior to z-score normalizing the mean (e.g. for site 1) is not 0</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(training_set<span class="op">$</span>site_<span class="dv">0001</span>)</a></code></pre></div>
<pre><code>## [1] 0.002913165</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># after normalizing the data the mean is pretty much 0</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(processed_data<span class="op">$</span>training_set<span class="op">$</span>site_<span class="dv">0001</span>)</a></code></pre></div>
<pre><code>## [1] 4.288703e-17</code></pre>
<p><br></p>
<p><br></p>
</div>
</div>
<div id="classifiers-cl" class="section level1">
<h1 class="hasAnchor">
<a href="#classifiers-cl" class="anchor"></a>Classifiers (CL)</h1>
<p>Classifiers take a set of training data and training labels, and learn a model of the relationship between the training data and the labels from the different classes. Once this model has been learned (i.e., once the classifier has been trained), the classifier is then used to make predictions about what labels were present in a new set of test data.</p>
<div id="implementing-a-cl-required-methods-and-data-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#implementing-a-cl-required-methods-and-data-formats" class="anchor"></a>Implementing a CL: required methods and data formats</h3>
<p>Objects that are classifiers must implement the <code><a href="../reference/get_predictions.html">get_predictions()</a></code> method. This method takes two data frames called <em>training_set</em> and <em>test_set</em> have the following variables:</p>
<div id="training_set-1" class="section level4">
<h4 class="hasAnchor">
<a href="#training_set-1" class="anchor"></a>training_set</h4>
<ol style="list-style-type: decimal">
<li>
<code>training_labels</code>: The labels used to train the classifier.</li>
<li>
<code>site_X</code>: a group of varaibles that has data from multiple sites.</li>
</ol>
</div>
<div id="test_set-1" class="section level4">
<h4 class="hasAnchor">
<a href="#test_set-1" class="anchor"></a>test_set</h4>
<ol style="list-style-type: decimal">
<li>
<code>test_labels</code> The labels used to testthe classifier.</li>
<li>
<code>site_X</code>: a group of varaibles that has data from multiple sites.</li>
<li>
<code>time_bin</code>: character strings listing which times different rows correspond to.</li>
</ol>
<p>The <code><a href="../reference/get_predictions.html">get_predictions()</a></code> returns a data frame that has the following variables:</p>
<ol style="list-style-type: decimal">
<li><p><code>test_time</code>: a character vector indicating the times which the rows come from</p></li>
<li><p><code>actual_labels</code>: the labels that were actually present on each trial</p></li>
<li><p><code>predicted_labels</code>: the labels that the classifier predicted</p></li>
<li><p><code>decision_vals.X</code> (optional): a group of variables that has values that indicate how strongly the classifier rates a test point as coming from a particular class</p></li>
</ol>
<p>Like all NDTr objects, CL objects must also implement a <code>get_properties()</code> method which returns a data frame with one row that lists all the properties that have been set to allow for reproducible research.</p>
</div>
</div>
<div id="example-of-internals-of-cl-object-using-the-cl_max_correlation" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-internals-of-cl-object-using-the-cl_max_correlation" class="anchor"></a>Example of internals of CL object using the cl_max_correlation</h3>
<p>If you want to implement a new CL object yourself, below is an example of how the CL object gets and returns data.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># create a ds_basic to get the data</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">data_file_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata/ZD_150bins_50sampled.Rda"</span>, <span class="dt">package=</span><span class="st">"NDTr"</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">ds &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ds_basic.html">ds_basic</a></span>(data_file_name, <span class="st">'stimulus_ID'</span>, <span class="dv">18</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">cv_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_data.html">get_data</a></span>(ds)  </a>
<a class="sourceLine" id="cb7-5" data-line-number="5"> </a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co"># an example of spliting the data into a training and test set, </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co"># this is done in the cross-validator</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9">training_set &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(cv_data, </a>
<a class="sourceLine" id="cb7-10" data-line-number="10">                              time_bin <span class="op">==</span><span class="st"> "time.100_249"</span>, </a>
<a class="sourceLine" id="cb7-11" data-line-number="11">                              CV_<span class="dv">1</span> <span class="op">==</span><span class="st"> "train"</span>) <span class="op">%&gt;%</span><span class="st">       </span><span class="co"># get data from the first CV split</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">"site"</span>), train_labels)</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">        </a>
<a class="sourceLine" id="cb7-14" data-line-number="14">test_set &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(cv_data, CV_<span class="dv">1</span> <span class="op">==</span><span class="st"> "test"</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># get data from the first CV split</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">"site"</span>), test_labels, time_bin) </a>
<a class="sourceLine" id="cb7-16" data-line-number="16"></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co"># use the cl object to make predictions </span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20">cl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cl_max_correlation.html">cl_max_correlation</a></span>()</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">predictions &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_predictions.html">get_predictions</a></span>(cl, training_set, test_set)</a>
<a class="sourceLine" id="cb7-22" data-line-number="22"></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(predictions)</a></code></pre></div>
<pre><code>##  [1] "test_time"            "actual_labels"        "predicted_labels"    
##  [4] "decision_vals.car"    "decision_vals.couch"  "decision_vals.face"  
##  [7] "decision_vals.flower" "decision_vals.guitar" "decision_vals.hand"  
## [10] "decision_vals.kiwi"</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># see how accurate the predictions are (chance is 1/7)</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">predictions_at_100ms &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(predictions, test_time <span class="op">==</span><span class="st"> "time.100_249"</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(predictions_at_100ms<span class="op">$</span>actual_labels <span class="op">==</span><span class="st"> </span>predictions_at_100ms<span class="op">$</span>predicted_labels)</a></code></pre></div>
<pre><code>## [1] 0.7142857</code></pre>
<p><br></p>
<p><br></p>
</div>
</div>
<div id="result-metrics-rm" class="section level1">
<h1 class="hasAnchor">
<a href="#result-metrics-rm" class="anchor"></a>Result metrics (RM)</h1>
<p>Result metrics take the predictions made by a classifier and aggregate the results to that they can be interpreated.</p>
<div id="implementing-an-rm-required-methods-and-data-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#implementing-an-rm-required-methods-and-data-formats" class="anchor"></a>Implementing an RM: required methods and data formats</h3>
<p>To create a result metric two methods must be implemented <code><a href="../reference/aggregate_CV_split_results.html">aggregate_CV_split_results()</a></code> which aggregates the results after a set of cross-valiation sweeps have been completed and <code><a href="../reference/aggregate_resample_run_results.html">aggregate_resample_run_results()</a></code> which aggregates the final results across all the resample runs.</p>
<div id="aggregate_cv_split_results-method" class="section level4">
<h4 class="hasAnchor">
<a href="#aggregate_cv_split_results-method" class="anchor"></a>aggregate_CV_split_results() method</h4>
<p>The <code><a href="../reference/aggregate_CV_split_results.html">aggregate_CV_split_results()</a></code> method takes a data frame that is a contentation of the prediction data frames made by the classifier (CL) objects across all times and cross-validation splits in one resample run. Thus the input data frame to the <code><a href="../reference/aggregate_CV_split_results.html">aggregate_CV_split_results()</a></code> method has similar variables as in the output of the CL <code><a href="../reference/get_predictions.html">get_predictions()</a></code> method, namely:</p>
<ol style="list-style-type: decimal">
<li><p><code>CV</code>: a number indicating which cross-validation split the current row comes from</p></li>
<li><p><code>train_time</code>: the train time that the current row comes from.</p></li>
<li><p><code>test_time</code>: the test time that the current row comes from.</p></li>
<li><p><code>actual_labels</code>: the labels that were actually present on each trial.</p></li>
<li><p><code>predicted_labels</code>: the labels that the classifier predicted.</p></li>
<li><p><code>decision_vals.X</code> (optional): a group of variables that has values that indicate how strongly the classifier rates a test point as coming from a particular class</p></li>
</ol>
<p>The output of the <code>aggregate_CV_split_results</code> is a RM object of the same type that contains inherts from a data frame so that the results can be can be aggregated together (e.g., via rbind) across resample runs. The variables in the data frame can be anything that is useful to capture about the classification performance.</p>
</div>
<div id="aggregate_resample_run_results-method" class="section level4">
<h4 class="hasAnchor">
<a href="#aggregate_resample_run_results-method" class="anchor"></a>aggregate_resample_run_results() method</h4>
<p>The <code><a href="../reference/aggregate_resample_run_results.html">aggregate_resample_run_results()</a></code> method takes result metric data frames that have been aggregated together (e.g., via rbind) across resample runs. Thus this input data frame as the same variables as the data frame returned by the <code><a href="../reference/aggregate_CV_split_results.html">aggregate_CV_split_results()</a></code> along with one additional variable indicating which resample run each row comes from.</p>
<p>The output of this method should be a RM object of the same type that is a data frame which most likely is of a smaller size.</p>
<p>Like all NDTr objects, RM objects must also implement a <code>get_properties()</code> method which returns a data frame with one row that lists all the properties that have been set to allow for reproducible research.</p>
<p>RM objects can also have plot methods to allow the different aggregated results to be plotted</p>
</div>
</div>
<div id="example-of-result-metrics" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-result-metrics" class="anchor"></a>Example of result metrics</h3>
<p>Examples of using result metrics can be seen by going through the <a href="introduction_tutorial.html">Introduction tutorial</a></p>
<p><br></p>
<p><br></p>
</div>
</div>
<div id="cross-validators-cv" class="section level1">
<h1 class="hasAnchor">
<a href="#cross-validators-cv" class="anchor"></a>Cross-validators (CV)</h1>
<p>Cross-validators take a classifier (CL), a datasource (DS) feature preprocessors (FP) objects, and result metric (RM) objects and they run a cross-validation decoding scheme by training and testing the classifier with data generated from the datasource object (and possibly fed through the feature pre-processing first).</p>
<div id="implementing-a-cv-required-methods-and-data-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#implementing-a-cv-required-methods-and-data-formats" class="anchor"></a>Implementing a CV: required methods and data formats</h3>
<p>All cross-validators must implement <code><a href="../reference/run_decoding.html">run_decoding()</a></code> method. This method does not take any additional arguments (apart from the cross-validator itself).</p>
<p>The cross-validator returns a list <code>DECODING_RESULTS</code> which contains different RM objects that can be used to assess how accurately the classifier made predictions at different points in time.</p>
<p>Like all NDTr objects, CV objects must also implement a <code>get_properties()</code> method which returns a data frame with one row that lists all the properties that have been set and also pulls all properties from the other NDTr objects (e.g., from the DS, FP, CL and RM objects) to allow for reproducible research.</p>
</div>
<div id="example-of-cross-validators" class="section level3">
<h3 class="hasAnchor">
<a href="#example-of-cross-validators" class="anchor"></a>Example of cross-validators</h3>
<p>Examples of using the <code>cv_standard</code> can be seen by going through the <a href="introduction_tutorial.html">Introduction tutorial</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#datasources-ds">Datasources (DS)</a></li>
      <li><a href="#feature-preprocessors-fp">Feature preprocessors (FP)</a></li>
      <li><a href="#classifiers-cl">Classifiers (CL)</a></li>
      <li><a href="#result-metrics-rm">Result metrics (RM)</a></li>
      <li><a href="#cross-validators-cv">Cross-validators (CV)</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ethan Meyers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
